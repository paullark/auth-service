# Сервис аутентификации

Сервис для регистрации и авторизации пользователей 
с верификацией по электронной почте и разграничением прав доступа


Основные возможности платформы:

* Аутентификация с получением токенов после верификации по почте
* Авторизация с учётом token-scopes
* Изменение информации о профиле с верификацией при смене пароля или почты
* Создание, изменение, удаление, просмотр пользователей для администраторов


### Инструменты разработки:

- Python = ^3.12
- FastAPI = ^0.110.3
- MongoDB = 1.6.2
- Poetry = ^1.8.3
- Dynaconf = ^3.2.5
- Mypy = ^1.10.1
- Black = ^24.4.2
- isort = ^5.13.2

### Запуск

#### 1) Клонировать репозиторий
```
git clone <ссылка>
```
#### 2) Создать виртуальное окружение
```
python -m venv <имя окружения>
```
#### 3) Активировать окружение

#### 4) Установить зависимости
```
poetry install
```
#### 5) Создать базу данных MongoDB

#### 6) Создать secret-переменные
Создать файл ```.secrets.toml``` в корневом каталоге`.

Добавить в файл следующие параметры:
``` 
[default]
secret_key = <str>

[default.mail]
username = <str>
password = <str>
mail_from = <str>
port = <int>
server = <str>
starttls = <bool>
ssl_tls = <bool>
use_credentials = <bool>
validate_certs = <bool>
```

#### 7) Запустить бау данных
```
sudo mongod
```

#### 8) Запустить сервер
```
app.auth:app --reload
```

### Особенности реализации
* Авторизация пользователей с использованием JSON Web Tokens
* Использование Poetry для установки зависимостей
* Использование Dynaconf для для подключения toml-файлов настроек 
* Использование кастомной мини-ODM для подключения и работы с БД
* Использование уинверсальных моделей верификаций для регистрации смены пароля и тд.
* Отправка писем с помощью fastapi-mail
* Использование Mypy, Black, isort, flake8 для линтинга, проверки типов и валидации
* Кастомные эксепшны

### Документация
Полное описание эндпоинтов и моделей можно получить по адресу 
```http://127.0.0.1:8000/docs/``` после запуска проекта